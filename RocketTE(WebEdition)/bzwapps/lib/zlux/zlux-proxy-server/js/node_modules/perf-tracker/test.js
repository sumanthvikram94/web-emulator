
const { EventLoopTracker, EluEvents } = require('./dist/index') 

const elt = new EventLoopTracker({
    busy: 0.01,
    crazy: 0.05,
    doTrackPercent: true,
    doEmitAll: true,
    interval: 5000
});

elt.on(EluEvents.SAMPLE, (eu) => {
    console.log('active: ' + eu.active + ', idle' + eu.idle + ', utilization: ' + eu.utilization)
})
elt.on(EluEvents.BUSY, (eu) => {
    console.log('busy: ' + eu)
})
elt.on(EluEvents.NOTBUSY, (eu) => {
    console.log('not busy: ' + eu)
})
elt.on(EluEvents.CRAZY, (eu) => {
    console.log('crazy: ' + eu)
})
elt.on(EluEvents.NOTCRAZY, (eu) => {
    console.log('not crazy: ' + eu)
})
elt.on(EluEvents.BELOW_10, (eu) => {
    console.log('below 10: ' + eu)
})
elt.on(EluEvents.ABOVE_10, (eu) => {
    console.log('above 10: ' + eu)
})

const interv = setInterval(() => {
    const aaa = JSON.stringify(JSON.parse(JSON.stringify(JSON.parse(JSON.stringify({aaa: 'aaa'}))))) 
    + JSON.stringify(JSON.parse(JSON.stringify(JSON.parse(JSON.stringify({aaa: 'aaa'}))))) 
    + JSON.stringify(JSON.parse(JSON.stringify(JSON.parse(JSON.stringify({aaa: 'aaa'}))))) 
    + JSON.stringify(JSON.parse(JSON.stringify(JSON.parse(JSON.stringify({aaa: 'aaa'}))))) 
    + JSON.stringify(JSON.parse(JSON.stringify(JSON.parse(JSON.stringify({aaa: 'aaa'}))))) 
    + JSON.stringify(JSON.parse(JSON.stringify(JSON.parse(JSON.stringify({aaa: 'aaa'}))))) 
    + JSON.stringify(JSON.parse(JSON.stringify(JSON.parse(JSON.stringify({aaa: 'aaa'}))))) 
    + JSON.stringify(JSON.parse(JSON.stringify(JSON.parse(JSON.stringify({aaa: 'aaa'}))))) 
    + JSON.stringify(JSON.parse(JSON.stringify(JSON.parse(JSON.stringify({aaa: 'aaa'}))))) 
    + JSON.stringify(JSON.parse(JSON.stringify(JSON.parse(JSON.stringify({aaa: 'aaa'}))))) 
}, 10000);

setTimeout(() => {
    elt.stop();
    clearInterval(interv);
}, 60000)
